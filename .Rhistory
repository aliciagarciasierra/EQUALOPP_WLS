if(!require(tidyverse)) install.packages("tidyverse")
if(!require(sjPlot)) install.packages("sjPlot")
if(!require(texreg)) install.packages("texreg")
if(!require(lme4)) install.packages("lme4")
if(!require(performance)) install.packages("performance")
if(!require(brms)) install.packages("brms")
if(!require(tidybayes)) install.packages("tidybayes")
library(texreg)
(tidybayes)
library(tidybayes)
source("00_MASTER_WLS.R")
siblings <- readRDS("data/siblings.rds")
setwd("~/Library/Mobile Documents/com~apple~CloudDocs/University/UNIL/projects/Inequality-Across-Families-and-PGIs/WLS/EQUALOPP_WLS")
source("00_MASTER_WLS.R")
siblings <- readRDS("data/siblings.rds")
# Read the data
data_graph <- read_excel(paste0("results/full_results_",OBSERVED_COG,".xlsx"), sheet = "For plotting")
# Set theme
set_pilot_family("Avenir Next Medium", title_family = "Avenir Next Demi Bold")
# Custom order
data_graph$Index   <- factor(data_graph$Index, levels = INDICES)
data_graph$Outcome <- factor(data_graph$Outcome, levels = OUTCOMES)
# Create the bar graph
# Main elements
ggplot(data_graph, aes(x = Outcome, y = Estimate, fill = Index)) +
geom_bar(stat = "identity", position = "dodge") +
geom_errorbar(aes(ymin = Lower, ymax = Upper),
position = position_dodge(0.9), width = 0.25, alpha = 0.4) +
labs(title = " ", x = " ", y = " ") +
geom_text(aes(label = round(Estimate, 2)), position = position_dodge(width = 1), vjust =-1.5 ,hjust=-0.1) +
# Add labels
scale_x_discrete(labels = OUTCOMES.labs) +
scale_fill_discrete(labels = INDICES.labs) +
# Theme
guides(fill = guide_legend(title = NULL)) +
theme_bw()
#theme_pilot(axis_title_size = 14,
#            axis_text_size = 13,
#            legend_text_size = 13,
#            legend_title_size = 13,
#            legend_position = "right")
#
# Save the plot
ggsave(paste0("plots/results_plot_",OBSERVED_COG,".pdf"), width = 13, height = 6, dpi = 300)
pdf(NULL)
---------------- Plot the graph
# Read the data
data_graph <- read_excel("results/full_results.xlsx", sheet = "For plotting")
# Set theme
set_pilot_family("Avenir Next Medium", title_family = "Avenir Next Demi Bold")
# Custom order
data_graph$Index   <- factor(data_graph$Index, levels = INDICES)
data_graph$Outcome <- factor(data_graph$Outcome, levels = OUTCOMES)
# Create the bar graph
# Main elements
ggplot(data_graph, aes(x = Outcome, y = Estimate, fill = Index)) +
geom_bar(stat = "identity", position = "dodge") +
geom_errorbar(aes(ymin = Lower, ymax = Upper),
position = position_dodge(0.9), width = 0.25, alpha = 0.4) +
labs(title = " ", x = " ", y = " ") +
geom_text(aes(label = round(Estimate, 2)), position = position_dodge(width = 1), vjust =-1.5 ,hjust=-0.1) +
# Add labels
scale_x_discrete(labels = OUTCOMES.labs) +
scale_fill_discrete(labels = c("Sibcorr" = "Sibling correlation",
"IOLIB" = "Liberal IOP",
"IORAD" = "Radical IOP")) +
# Theme
guides(fill = guide_legend(title = NULL)) +
theme_bw()
#theme_pilot(axis_title_size = 14,
#            axis_text_size = 13,
#            legend_text_size = 13,
#            legend_title_size = 13,
#            legend_position = "right")
# Save the plot
ggsave("plots/results_plot_PGI.pdf", width = 13, height = 6, dpi = 300)
pdf(NULL)
